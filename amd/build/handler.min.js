define("local_entities/handler",["exports","core/modal_factory","core/modal_events","core/templates","core/str"],(function(_exports,_modal_factory,_modal_events,_templates,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/*
   * @package    local_entities
   * @copyright  Wunderbyte GmbH <info@wunderbyte.at>
   * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_modal_factory=_interopRequireDefault(_modal_factory),_modal_events=_interopRequireDefault(_modal_events),_templates=_interopRequireDefault(_templates);_exports.init=()=>{const element=document.querySelector("#id_openmodal");element&&element.addEventListener("click",(()=>{const selectedelement=document.querySelector("#id_entitiesrelationcontainer div.form-autocomplete-selection span");if(selectedelement){const entityid=selectedelement.dataset.value;entityid>0&&function(entityid){(0,_str.get_strings)([{key:"timetablemodaltitle",component:"local_entities"},{key:"timetablemodalbutton",component:"local_entities"}]).then((strings=>{const json={id:entityid,locale:"de"};return _templates.default.renderForPromise("local_entities/entitiescalendar",json).then((_ref=>{let{html:html,js:js}=_ref;return _modal_factory.default.create({type:_modal_factory.default.types.SAVE_CANCEL,large:"true"}).then((modal=>(modal.setTitle(strings[0]),modal.setBody(html),modal.setSaveButtonText(strings[1]),modal.getRoot().on(_modal_events.default.save+" "+_modal_events.default.outsideClick+" "+_modal_events.default.hidden,(function(){modal.destroy()})),modal.setRemoveOnClose(!0),modal.show(),_templates.default.runTemplateJS(js),modal))).catch((e=>{console.log(e)})),!0})).catch((e=>{console.log(e)})),!0})).catch((e=>{console.log(e)}))}(entityid)}}))}}));

//# sourceMappingURL=handler.min.js.map