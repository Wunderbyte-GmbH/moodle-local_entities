{{!
    This file is part of Moodle - http://moodle.org/
    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.
    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.
    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template local_entities
    Template which defines a entities view page.
    Classes required for JS:
    * none
    Data attributes required for JS:
    * none
    Context variables required for this template:
    Example context (json):
    {

    }
}}

<div class="card" style="max-width: 900px">
    <div class="card-header p-0 m-0" style="min-height:60px; background: #fff">
        <div class="headerpill badge badge-info">{{type}}</div>
        {{#canedit}}
        <label class="switch headerswitch">
            <input type="checkbox">
            <span class="slider round"></span>
        </label>
        {{/canedit}}
        {{#haspicture}}
            <img src="{{picture}}" class="w-100" alt="{{name}}-picture">
        {{/haspicture}}
    </div>
    <div class="card-header">
        {{#name}}
        <h3>
            {{name}}{{#shortname}} ({{.}}){{/shortname}}
        </h3>
        {{/name}}
    </div>
    <div class="card-body">
        {{{description}}}
        <hr>
        {{#hasaddress}}
        <div class="container-fluid">

        <div class="row">
            <div class="col-md-6">
            <i class="fa fa-map-marker fa-2x" aria-hidden="true"></i>
                <ul class="addresslist list-unstyled pl-4 py-4">
                    {{#addresscleaned}}
                    <li>{{city}}, {{postcode}}</li>
                    <li>{{streetname}} {{streetnumber}}</li>
                    {{#maplink}}
                    <li>
                        {{#str}}address_map_link , local_entities{{/str}}:
                        <a href="{{maplink}}" target="_blank">
                            {{maplink}}
                        </a>
                    </li>
                    {{/maplink}}
                    {{#mapembed}}<li>{{#str}}map, local_entities{{/str}}:<br/>{{{.}}}</li>{{/mapembed}}
                    {{/addresscleaned}}
                </ul>
            </div>
            <div class="col-md-6">
            <i class="fa fa-id-card-o fa-2x" aria-hidden="true"></i>
                <ul class="contactlist list-unstyled pl-4 py-4">
                    {{#contactscleaned}}
                    <li>{{givenname}} {{surname}}</li>
                    <li>{{mail}}</li>
                    {{/contactscleaned}}
                </ul>
            </div>

        </div>
        </div>
        <hr>
        {{/hasaddress}}
        <div class="container-fluid">

        {{#metadata}}
        <h5>Additonal Info</h5>
        <div class="row">
            <div class="col">
                {{{metadata}}}
            </div>
        </div>
        {{/metadata}}
        </div>

        {{#parent}}
            <h5>{{#str}} belongs_to, local_entities {{/str}}</h5>
            <a href="{{link}}">{{name}} ({{shortname}})</a>
        {{/parent}}

        {{#affiliated}}
        <h5>{{#str}} affiliated, local_entities {{/str}}</h5>
            <div class="row">
                <div class="col">
                    {{{affiliated}}}
                </div>
            </div>
        {{/affiliated}}
</div>

<div class="card-footer d-flex">
    {{#canedit}}
    <a class="btn" title="Ressource bearbeiten" href="{{editurl}}"><i class="fa fa-edit" aria-hidden="true"></i> {{#str}}edit{{/str}}</a>
    <a class="btn" title="Kalender" href="{{calendarurl}}" target="_blank"><i class="fa fa-calendar" aria-hidden="true"></i> {{#str}}calendar , local_entities{{/str}}</a>
    <div class="d-block ml-auto">
    <a data-confirm="Diese Ressource wirklich löschen?" class="btn" title="Ressource löschen" rel="nofollow" data-method="delete" href="{{delurl}}"><i class="fa fa-trash"></i>  {{#str}}delete{{/str}}</a>
    </div>
    {{/canedit}}
  </div>
</div>

